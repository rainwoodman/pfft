<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>chapter{Interface Layers of the PFFT Library}label{chap:api} &mdash; PFFT 1.0.8 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="PFFT 1.0.8 documentation" href="index.html" />
    <link rel="next" title="chapter{Developers Guide}label{chap:develop}" href="develop.html" />
    <link rel="prev" title="chapter{Advanced Features}label{chap:feat}" href="features.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="develop.html" title="chapter{Developers Guide}label{chap:develop}"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="features.html" title="chapter{Advanced Features}label{chap:feat}"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PFFT 1.0.8 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="chapter-interface-layers-of-the-pfft-library-label-chap-api">
<h1>chapter{Interface Layers of the PFFT Library}label{chap:api}<a class="headerlink" href="#chapter-interface-layers-of-the-pfft-library-label-chap-api" title="Permalink to this headline">Â¶</a></h1>
<p>We give a quick overview of the PFFT interface layers in the order of increasing flexibility at the example of c2c-FFTs.
For r2c-, c2r-, and r2r-FFT similar interface layer specifications apply. A full reference list of all PFFT functions is given in Chapter~ref{chap:ref}.
section{Basic Interface}
The code{_3d} interface is the simplest interface layer. It is suitable for the planning of three-dimensional FFTs.
begin{lstlisting}
ptrdiff_t pfft_local_size_dft_3d(</p>
<blockquote>
<div>const ptrdiff_t <a href="#id1"><span class="problematic" id="id2">*</span></a>n, MPI_Comm comm_cart, unsigned pfft_flags,
ptrdiff_t <a href="#id3"><span class="problematic" id="id4">*</span></a>local_ni, ptrdiff_t <a href="#id5"><span class="problematic" id="id6">*</span></a>local_i_start,
ptrdiff_t <a href="#id7"><span class="problematic" id="id8">*</span></a>local_no, ptrdiff_t <a href="#id9"><span class="problematic" id="id10">*</span></a>local_o_start);</div></blockquote>
<dl class="docutils">
<dt>void pfft_local_block_dft_3d(</dt>
<dd>const ptrdiff_t <a href="#id11"><span class="problematic" id="id12">*</span></a>n, MPI_Comm comm_cart,
int pid, unsigned pfft_flags,
ptrdiff_t <a href="#id13"><span class="problematic" id="id14">*</span></a>local_ni, ptrdiff_t <a href="#id15"><span class="problematic" id="id16">*</span></a>local_i_start,
ptrdiff_t <a href="#id17"><span class="problematic" id="id18">*</span></a>local_no, ptrdiff_t <a href="#id19"><span class="problematic" id="id20">*</span></a>local_o_start);</dd>
<dt>pfft_plan pfft_plan_dft_3d(</dt>
<dd>const ptrdiff_t <a href="#id21"><span class="problematic" id="id22">*</span></a>n,
pfft_complex <a href="#id23"><span class="problematic" id="id24">*</span></a>in, pfft_complex <a href="#id25"><span class="problematic" id="id26">*</span></a>out, MPI_Comm comm_cart,
int sign, unsigned pfft_flags);</dd>
</dl>
<p>end{lstlisting}
Hereby, code{n}, code{local_ni}, code{local_i_start}, code{local_no}, and code{local_o_start} are
code{ptrdiff_t} arrays of length code{3}.</p>
<p>The basic interface generalizes the code{_3d} interface to FFTs of arbitrary dimension code{rnk_n}.
begin{lstlisting}
ptrdiff_t pfft_local_size_dft(</p>
<blockquote>
<div>int rnk_n, const ptrdiff_t <a href="#id27"><span class="problematic" id="id28">*</span></a>n,
MPI_Comm comm_cart, unsigned pfft_flags,
ptrdiff_t <a href="#id29"><span class="problematic" id="id30">*</span></a>local_ni, ptrdiff_t <a href="#id31"><span class="problematic" id="id32">*</span></a>local_i_start,
ptrdiff_t <a href="#id33"><span class="problematic" id="id34">*</span></a>local_no, ptrdiff_t <a href="#id35"><span class="problematic" id="id36">*</span></a>local_o_start);</div></blockquote>
<dl class="docutils">
<dt>void pfft_local_block_dft(</dt>
<dd>int rnk_n, const ptrdiff_t <a href="#id37"><span class="problematic" id="id38">*</span></a>n,
MPI_Comm comm_cart, int pid, unsigned pfft_flags,
ptrdiff_t <a href="#id39"><span class="problematic" id="id40">*</span></a>local_ni, ptrdiff_t <a href="#id41"><span class="problematic" id="id42">*</span></a>local_i_start,
ptrdiff_t <a href="#id43"><span class="problematic" id="id44">*</span></a>local_no, ptrdiff_t <a href="#id45"><span class="problematic" id="id46">*</span></a>local_o_start);</dd>
<dt>pfft_plan pfft_plan_dft(</dt>
<dd>int rnk_n, const ptrdiff_t <a href="#id47"><span class="problematic" id="id48">*</span></a>n,
pfft_complex <a href="#id49"><span class="problematic" id="id50">*</span></a>in, pfft_complex <a href="#id51"><span class="problematic" id="id52">*</span></a>out, MPI_Comm comm_cart,
int sign, unsigned pfft_flags);</dd>
</dl>
<p>end{lstlisting}
Therefore, code{n}, code{local_ni}, code{local_i_start}, code{local_no}, and code{local_o_start} become
arrays of length code{rnk_n}.</p>
<p>section{Advanced Interface}
The advanced interface introduces the arrays code{ni} and code{no} of length code{rnk_n}
that give the pruned FFT input and output size.
Furthermore, the arrays code{iblock} and code{oblock} of length code{rnk_pm} (code{rnk_pm} being the dimension of the process mesh)
serve to adjust the block size of the input and output block decomposition.
The additional parameter code{howmany} gives the number of transforms that will be computed simultaneously.
begin{lstlisting}
ptrdiff_t pfft_local_size_many_dft(</p>
<blockquote>
<div>int rnk_n, const ptrdiff_t <a href="#id53"><span class="problematic" id="id54">*</span></a>n,
const ptrdiff_t <a href="#id55"><span class="problematic" id="id56">*</span></a>ni, const ptrdiff_t <a href="#id57"><span class="problematic" id="id58">*</span></a>no, ptrdiff_t howmany,
const ptrdiff_t <a href="#id59"><span class="problematic" id="id60">*</span></a>iblock, const ptrdiff_t <a href="#id61"><span class="problematic" id="id62">*</span></a>oblock,
MPI_Comm comm_cart, unsigned pfft_flags,
ptrdiff_t <a href="#id63"><span class="problematic" id="id64">*</span></a>local_ni, ptrdiff_t <a href="#id65"><span class="problematic" id="id66">*</span></a>local_i_start,
ptrdiff_t <a href="#id67"><span class="problematic" id="id68">*</span></a>local_no, ptrdiff_t <a href="#id69"><span class="problematic" id="id70">*</span></a>local_o_start);</div></blockquote>
<dl class="docutils">
<dt>void pfft_local_block_many_dft(</dt>
<dd>int rnk_n, const ptrdiff_t <a href="#id71"><span class="problematic" id="id72">*</span></a>ni, const ptrdiff_t <a href="#id73"><span class="problematic" id="id74">*</span></a>no,
const ptrdiff_t <a href="#id75"><span class="problematic" id="id76">*</span></a>iblock, const ptrdiff_t <a href="#id77"><span class="problematic" id="id78">*</span></a>oblock,
MPI_Comm comm_cart, int pid, unsigned pfft_flags,
ptrdiff_t <a href="#id79"><span class="problematic" id="id80">*</span></a>local_ni, ptrdiff_t <a href="#id81"><span class="problematic" id="id82">*</span></a>local_i_start,
ptrdiff_t <a href="#id83"><span class="problematic" id="id84">*</span></a>local_no, ptrdiff_t <a href="#id85"><span class="problematic" id="id86">*</span></a>local_o_start);</dd>
<dt>pfft_plan pfft_plan_many_dft(</dt>
<dd>int rnk_n, const ptrdiff_t <a href="#id87"><span class="problematic" id="id88">*</span></a>n,
const ptrdiff_t <a href="#id89"><span class="problematic" id="id90">*</span></a>ni, const ptrdiff_t <a href="#id91"><span class="problematic" id="id92">*</span></a>no, ptrdiff_t howmany,
const ptrdiff_t <a href="#id93"><span class="problematic" id="id94">*</span></a>iblock, const ptrdiff_t <a href="#id95"><span class="problematic" id="id96">*</span></a>oblock,
pfft_complex <a href="#id97"><span class="problematic" id="id98">*</span></a>in, pfft_complex <a href="#id99"><span class="problematic" id="id100">*</span></a>out, MPI_Comm comm_cart,
int sign, unsigned pfft_flags);</dd>
</dl>
<p>end{lstlisting}</p>
<p>section{Preliminary: Skip Serial Transformations}label{sec:skip-trafo}
The code{_skipped} interface extends the code{_many} interface by adding the possibility to skip some of the serial FFTs.
begin{lstlisting}
pfft_plan pfft_plan_many_dft_skipped(</p>
<blockquote>
<div>int rnk_n, const ptrdiff_t <em>n,
const ptrdiff_t *ni, const ptrdiff_t *no, ptrdiff_t howmany,
const ptrdiff_t *iblock, const ptrdiff_t *oblock,
(red&#64;const int *skip_trafos,&#64;</em>)
pfft_complex <a href="#id101"><span class="problematic" id="id102">*</span></a>in, pfft_complex <a href="#id103"><span class="problematic" id="id104">*</span></a>out, MPI_Comm comm_cart,
int sign, unsigned pfft_flags);</div></blockquote>
<p>end{lstlisting}
Hereby, code{skip_trafos} is an code{int} array of length code{rnk_pm+1} (code{rnk_pm} being the mesh dimension of the communicator code{comm_cart}).
For code{t=0,...,rnk_pm} set code{skip_trafos[t]=1} if the code{t}-th serial transformation should be computed, otherwise set code{skip_trafos[t]=0}.
Note that the local transpositions are always performed, since they are a prerequisite for the global communication to work.
At the moment it is only possible to skip the whole serial transform along the last code{rnk_n-rnk_pm-1} dimensions.
However, this behaviour can be realized by a call of a code{(rnk_pm+1)}-dimensional PFFT with
begin{lstlisting}
for(int t=rnk_pm+1; t&lt;rnk_n; t++)</p>
<blockquote>
<div>howmany <a href="#id105"><span class="problematic" id="id106">*</span></a>= n[t];</div></blockquote>
<p>end{lstlisting}
and manual computation of the desired serial transforms along the last code{rnk_n-rnk_pm-1} dimensions.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="features.html"
                        title="previous chapter">chapter{Advanced Features}label{chap:feat}</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="develop.html"
                        title="next chapter">chapter{Developers Guide}label{chap:develop}</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/interface.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="develop.html" title="chapter{Developers Guide}label{chap:develop}"
             >next</a> |</li>
        <li class="right" >
          <a href="features.html" title="chapter{Advanced Features}label{chap:feat}"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PFFT 1.0.8 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Michael Pippig.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>